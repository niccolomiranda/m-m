const PARAMS={AMOUNT:100,MAX_AMOUNT:2e3,SCALE_BASE:.3,SPEED_BASE:1,ROTATIONSPEED_BASE:.03,RADIUS:100,STRENGTH:3};class AppRain extends PIXI.Application{constructor(s){super(s)}loadTextures(){return new Promise((s,e)=>{this.textures?s():assetsToTextures(assets).then(e=>{this.textures=e,s()})})}startRainingEffect(){this.loadTextures().then(this.createAssets.bind(this))}init(){this.mouse=vec2.fromValues(-1e3,-1e3),window.addEventListener("touchstart",this.onTouchStart.bind(this),!1),window.addEventListener("touchmove",this.onTouchMove.bind(this),!1),window.addEventListener("touchend",this.onTouchEnd.bind(this),!1),window.addEventListener("mousemove",this.onMouseMove.bind(this),!1),window.addEventListener("mousedown",this.onMouseDown.bind(this),!1),window.addEventListener("mouseup",this.onMouseUp.bind(this),!1);let s=document.createElement("div");return s.id="canvas",document.body.appendChild(s),s.appendChild(this.view),s.classList.add("rain"),this.resizeTo=s,this.time=0,this.ticker.add(s=>{if(this.time+=1,this.mouseDown&&1===Math.round(this.time%6)){let s=this.textures[Math.floor(Math.random()*this.textures.length)],e=vec2.create();vec2.add(e,this.mouseDown,vec2.fromValues(100*Math.random()*(Math.random()>.5?1:-1),100*Math.random()*(Math.random()>.5?1:-1))),this.assets.push(new Asset(s,e)),this.assets.length>PARAMS.MAX_AMOUNT&&this.assets.shift().remove()}this.assets&&this.assets.forEach(s=>{s.update()})}),this}createAssets(){this.assets=[];for(let s=0;s<PARAMS.AMOUNT;s++){let s=this.textures[Math.floor(Math.random()*this.textures.length)];this.assets.push(new Asset(s))}}onMouseMove(s){this.mouse=vec2.fromValues(s.clientX,s.clientY),this.mouseDown&&(this.mouseDown=this.mouse)}onMouseDown(s){this.mouseDown=vec2.fromValues(s.clientX,s.clientY)}onMouseUp(s){this.mouseDown=null}onTouchStart(s){}onTouchMove(s){this.mouse=vec2.fromValues(s.touches[0].clientX,s.touches[0].clientY),this.mouseDown&&(this.mouseDown=this.mouse)}onTouchEnd(s){this.mouse=vec2.fromValues(-1e3,-1e3),this.mouseDown=null}}class Asset{constructor(s,e=null){this.position=e,this.texture=s,this.init()}init(){this.sprite=new PIXI.Sprite(this.texture),this.scale=PARAMS.SCALE_BASE+Math.random()/10,this.size=vec2.fromValues(this.texture.baseTexture.width*this.scale,this.texture.baseTexture.height*this.scale),this.position=this.position||vec2.fromValues(appRain.screen.width*Math.random(),-(appRain.screen.height+10*this.size[1])*Math.random()-this.size[1]/2),this.speed=vec2.fromValues(0,PARAMS.SPEED_BASE+Math.random()/2),this.rotation=360*Math.random(),this.rotationSpeed=PARAMS.ROTATIONSPEED_BASE+Math.random()/100,this.sprite.anchor.x=.5,this.sprite.anchor.y=.5,appRain.stage.addChild(this.sprite)}update(){if(vec2.add(this.position,this.position,this.speed),vec2.distance(this.position,appRain.mouse)<PARAMS.RADIUS){let s=vec2.create();vec2.subtract(s,this.position,appRain.mouse),vec2.normalize(s,s),vec2.multiply(s,s,vec2.fromValues(PARAMS.STRENGTH,PARAMS.STRENGTH)),vec2.add(this.position,this.position,s),this.rotation+=this.rotationSpeed}this.position[1]-this.size[1]>appRain.screen.height&&(this.position=vec2.fromValues(appRain.screen.width*Math.random(),-(appRain.screen.height+10*this.size[1])*Math.random()-this.size[1]/2)),this.sprite.x=this.position[0],this.sprite.y=this.position[1],this.sprite.scale.x=this.scale,this.sprite.scale.y=this.scale,this.sprite.rotation=this.rotation}remove(){appRain.stage.removeChild(this.sprite)}}const assets=["https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d9460377a8810a666ea7e08_ass1.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d932c78e2f2d377b0117e0c_ass2.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d9353b9e5d4e627928b6104_ass3.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d946037062b7ab0f3885c10_ass4.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d932c7d67afa8599ad186fa_ass5.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d9460371a306d504f4584ea_ass6.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d946037f39185079f14050c_ass7.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d9460379757b844c096f0f7_ass8.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d946037062b7aa00f885c43_ass9.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d9460379757b8d83296f0f6_ass10.svg","https://uploads-ssl.webflow.com/5b67e2c8dc6fa8e26712d6d5/5d9358021d15370ab2b3e99c_ass11.svg"];function assetsToTextures(s){const e=new PIXI.Loader,t=[];return s.forEach((s,t)=>{e.add(t.toString(),s)}),e.load((s,e)=>{}),new Promise((s,i)=>{e.onComplete.add((e,i)=>{Object.keys(i).forEach(e=>{let o=i[e];t.push(o.texture),s(t)})})})}let appRain=new AppRain({width:window.innerWidth,height:window.innerHeight,transparent:!0,resolution:window.devicePixelRatio||1,resizeTo:window,forceFXAA:!0,powerPreference:"high-performance"});appRain.init().startRainingEffect();
