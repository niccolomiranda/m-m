Number.prototype.map=function(e,t,o,n){return(this-e)*(n-o)/(t-e)+o};let isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);const isFIREFOX=navigator.userAgent.includes("Firefox"),firefoxMultiplier=33,scrollStrength=1,scrollDuration=1,scrollEasing=Power4.easeOut,jsScroll=document.querySelector("#scroll"),jsScrollContainer=document.querySelector("#scroll-container"),scrollbar=document.querySelector("#scroll-scrollbar"),scrollbarThumb=document.querySelector("#scroll-scrollbar-thumb");let scrollbarThumbHeight,maxDeltaY,touchPosition,HEIGHT,curtains,planeElements,planeElementsParams,deltaY=0,delta={y:0,x:0},mouseDown=!1,touchStart=!1,planes=[];function initCurtain(){curtains=new Curtains("canvas"),planeElements=document.querySelectorAll(".scroll-effect"),planeElementsParams={vertexShaderID:"plane-vs",fragmentShaderID:"plane-fs",widthSegments:100,heightSegments:100,uniforms:{time:{name:"uTime",type:"1f",value:0},multiplicator:{name:"uMultiplicator",type:"1f",value:0},mousePosition:{name:"uMousePosition",type:"2f",value:[0,0]},resolution:{name:"uResolution",type:"2f",value:[0,0]},mouseMoveStrength:{name:"uMouseMoveStrength",type:"1f",value:0}}},planeElements.forEach((e,t)=>{let o=curtains.addPlane(e,planeElementsParams);o&&(planes.push(o),o.uniforms.resolution.value=[window.devicePixelRatio*e.clientWidth,window.devicePixelRatio*e.clientHeight],o.onRender(()=>{o.uniforms.time.value+=.015}))})}function init(){HEIGHT=jsScroll.offsetHeight,scrollbarThumbHeight=100-jsScrollContainer.offsetHeight/HEIGHT,maxDeltaY=-jsScrollContainer.offsetHeight+HEIGHT,(isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))&&document.body.classList.add("is-mobile"),scroll()}function onWheel(e){let t=-e.deltaY*(isFIREFOX?firefoxMultiplier*scrollStrength:1*scrollStrength);deltaY+=t,scroll()}function scroll(){deltaY=Math.min(Math.max(maxDeltaY,deltaY),0),TweenMax.to(delta,scrollDuration,{y:deltaY,ease:scrollEasing,onUpdate:()=>{planes.forEach(e=>{e.setRelativePosition(e.relativeTranslation.x,delta.y,e.relativeTranslation.z)})}}),TweenMax.to(jsScrollContainer,scrollDuration,{y:deltaY,ease:scrollEasing}),planes.forEach(e=>{if(e.uniforms.mouseMoveStrength.value<3){let t=new TimelineMax;t.to([e.uniforms.mouseMoveStrength,e.uniforms.multiplicator],1,{value:3}),t.to([e.uniforms.mouseMoveStrength,e.uniforms.multiplicator],1,{value:0})}});let e=HEIGHT-scrollbarThumb.offsetHeight,t=e-deltaY.map(maxDeltaY,0,0,e);t=Math.min(Math.max(0,t),e),TweenMax.to(scrollbarThumb,scrollDuration,{y:t,ease:scrollEasing})}function onMouseDown(e){mouseDown=!0,e.preventDefault()}function onMouseUp(e){mouseDown=!1,e.preventDefault()}function onMouseMove(e){if(mouseDown){let t=e.clientY;deltaY=maxDeltaY-t.map(0,HEIGHT,maxDeltaY,0),scroll(),e.preventDefault()}}jsScroll.addEventListener("wheel",onWheel),scrollbarThumb.addEventListener("mousedown",onMouseDown),window.addEventListener("mouseup",onMouseUp),window.addEventListener("mousemove",onMouseMove),window.addEventListener("resize",init),window.addEventListener("DOMContentLoaded",function(){init(),initCurtain()});
