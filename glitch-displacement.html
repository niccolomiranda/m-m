<svg class="displacement-glitch" xmlns="http://www.w3.org/2000/svg" version="1.1"> <defs> <filter id="glitch-0"> <feTurbulence in="SourceGraphic" type="fractalNoise" baseFrequency="0 0.01" numOctaves="1" seed="0" result="noise"/> <feColorMatrix in="noise" color-interpolation-filters="sRGB" type="saturate" values="-99" result="mat-sat"/> <feColorMatrix in="mat-sat" color-interpolation-filters="sRGB" type="matrix" values="1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0" result="mat-red"/> <feDisplacementMap in="SourceGraphic" in2="mat-red" xChannelSelector="R" yChannelSelector="G" scale="30"/> </filter> </defs></svg><script>class AnimatedFilter{constructor(filterId, elementId){this.index=0; this.filterId=filterId; this.element=document.getElementById(elementId); this.isHover=false; this.element.addEventListener('mouseenter', ()=>{this.isHover=true;}); this.element.addEventListener('mouseleave', ()=>{this.isHover=false;}); this.update();}get currentFilterId(){return `${this.filterId}-${this.index}`;}
update(){const frame=window.requestAnimationFrame(_=> this.update()); if (frame % 5 !=0) return; const sec=performance.now() / 1000; const eFilter=document.getElementById(this.currentFilterId); this.index=(this.index + 1) % 2; eFilter.setAttribute('id', this.currentFilterId); const eNoise=eFilter.querySelector('feTurbulence'); const eDisplace=eFilter.querySelector(`feDisplacementMap`); const s1=(sec % 1) * 0.0001 + (Math.tan(Math.tan(sec)) * .1 + .1) * 0.001; eNoise.setAttribute('baseFrequency', `0 ${s1 * ((this.isHover) ? 0.5 : 0)}`); const rnd=parseInt(Math.random() * 100); eNoise.setAttribute('seed', `${(Math.random() < 0.9) ? rnd : 0}`); this.element.setAttribute('style', `filter: url(#${this.currentFilterId});`);}}; window.addEventListener('DOMContentLoaded', ()=>{const filter=new AnimatedFilter('glitch', 'hdg-1');});</script>