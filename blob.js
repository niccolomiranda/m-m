let canvas,ctx,render,blobInit,blob;const nTrigger=document.querySelector(".n-trigger");class Blob{constructor(){this.points=[]}blobInit(){for(let t=0;t<this.numPoints;t++){let i=new Point(this.divisional*(t+1),this);this.push(i)}}render(){let t=this.canvas,i=this.ctx,e=(this.position,this.points),s=(this.radius,this.numPoints),n=(this.divisional,this.center);i.clearRect(0,0,t.width,t.height),e[0].solveWith(e[s-1],e[1]);let o=e[s-1].position,a=e[0].position,r=a;i.beginPath(),i.moveTo(n.x,n.y),i.moveTo((o.x+a.x)/2,(o.y+a.y)/2);for(let t=1;t<s;t++){e[t].solveWith(e[t-1],e[t+1]||e[0]);let s=e[t].position;var h=(a.x+s.x)/2,c=(a.y+s.y)/2;i.quadraticCurveTo(a.x,a.y,h,c),i.fillStyle="transparent",a=s}h=(a.x+r.x)/2,c=(a.y+r.y)/2;i.quadraticCurveTo(a.x,a.y,h,c),i.closePath(),i.fillStyle=this.color,i.fill(),i.strokeStyle="#d7d6df",i.stroke(),requestAnimationFrame(this.render.bind(this))}push(t){t instanceof Point&&this.points.push(t)}set color(t){this._color=t}get color(){return this._color||"none"}set canvas(t){t instanceof HTMLElement&&"canvas"===t.tagName.toLowerCase()&&(this._canvas=canvas,this.ctx=this._canvas.getContext("2d"))}get canvas(){return this._canvas}set numPoints(t){t>2&&(this._points=t)}get numPoints(){return this._points||8}set radius(t){t>0&&(this._radius=t)}get radius(){return this._radius||.3*nTrigger.offsetWidth}set position(t){"object"==typeof t&&t.x&&t.y&&(this._position=t)}get position(){return this._position||{x:.5,y:.5}}get divisional(){return 2*Math.PI/this.numPoints}get center(){return{x:this.canvas.width*this.position.x,y:this.canvas.height*this.position.y}}set running(t){this._running=!0===t}get running(){return!1!==this.running}}class Point{constructor(t,i){this.parent=i,this.azimuth=Math.PI-t,this._components={x:Math.cos(this.azimuth),y:Math.sin(this.azimuth)},this.acceleration=.6*Math.random()-.3}solveWith(t,i){this.acceleration=(-.4*this.radialEffect+(t.radialEffect-this.radialEffect)+(i.radialEffect-this.radialEffect))*this.elasticity-this.speed*this.friction}set acceleration(t){"number"==typeof t&&(this._acceleration=t,this.speed+=3.22*this._acceleration)}get acceleration(){return this._acceleration||0}set speed(t){"number"==typeof t&&(this._speed=t,this.radialEffect+=1.2*this._speed)}get speed(){return this._speed||0}set radialEffect(t){"number"==typeof t&&(this._radialEffect=t)}get radialEffect(){return this._radialEffect||0}get position(){return{x:this.parent.center.x+this.components.x*(this.parent.radius+this.radialEffect),y:this.parent.center.y+this.components.y*(this.parent.radius+this.radialEffect)}}get components(){return this._components}set elasticity(t){"number"==typeof t&&(this._elasticity=t)}get elasticity(){return this._elasticity||4e-4}set friction(t){"number"==typeof t&&(this._friction=t)}get friction(){return this._friction||.0075}}blob=new Blob,(blobInit=function(){(canvas=document.createElement("canvas")).setAttribute("touch-action","none"),nTrigger.appendChild(canvas);let t=function(){canvas.width=nTrigger.offsetWidth,canvas.height=nTrigger.offsetHeight};window.addEventListener("resize",t),t();let i={x:0,y:0},e=!1;window.addEventListener("pointermove",function(t){let s=blob.center,n=t.clientX-nTrigger.offsetLeft,o=t.clientY-nTrigger.offsetTop,a=n-s.x,r=o-s.y,h=Math.sqrt(a*a+r*r),c=null;if(blob.mousePos={x:s.x-n,y:s.y-o},h<blob.radius&&!1===e){let t={x:n-s.x,y:o-s.y};c=Math.atan2(t.y,t.x),e=!0}else if(h>blob.radius&&!0===e){let t={x:n-s.x,y:o-s.y};c=Math.atan2(t.y,t.x),e=!1,blob.color=null}if("number"==typeof c){let s=null,n=100;if(blob.points.forEach(t=>{Math.abs(c-t.azimuth)<n&&(s=t,n=Math.abs(c-t.azimuth))}),s){let n={x:i.x-t.clientX,y:i.y-t.clientY};(n=10*Math.sqrt(n.x*n.x+n.y*n.y))>90&&(n=90),s.acceleration=n/100*(e?-1:1)}}i.x=t.clientX,i.y=t.clientY}),blob.canvas=canvas,blob.blobInit(),blob.render()})();
